% !TeX root = ./explain.tex
% This file is not intended to contain any user-adjustable parameters.

\begin{document}

\begin{tikzpicture}[remember picture,overlay]

  % Add watermark
  \node [font=\ttfamily,color=black!20]
  at ($(current page text area.north) - (0mm,0.5ex)$) {
    \href{https://github.com/maverickwoo/paperpad-templates}{\number\year-\number\month-\number\day}
  };
  \node [font=\ttfamily,color=black!20]
  at ($(current page text area.south) + (0mm,0.5ex)$) {
    \href{https://github.com/maverickwoo/paperpad-templates}{\pdftitle}
  };

  % Compute origin coordinate
  \pgfmathsetlengthmacro{\totalwidth}{\nx*\sxlen+(\nx-1)*\sxsep}
  \pgfmathsetlengthmacro{\marginx}{(\paperwidth-\totalwidth)/2}
  \pgfmathsetlengthmacro{\totalheight}{\ny*\sylen+(\ny-1)*\sysep}
  \pgfmathsetlengthmacro{\marginy}{(\paperheight-\totalheight)/2}
  \coordinate (origin) at ($(current page.south west) + (\marginx,\marginy)$);

  % Put stamps onto the grid
  \foreach \iy in {\ny,...,1}
  \foreach \ix in {1,...,\nx}
    {
      \pgfmathsetlengthmacro{\dx}{(\ix-1)*(\sxlen+\sxsep)}
      \pgfmathsetlengthmacro{\dy}{(\iy-1)*(\sylen+\sysep)}
      \draw ($(origin)+(\dx,\dy)$) pic {stamp};
    }

\end{tikzpicture}

\end{document}
